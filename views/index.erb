<!DOCTYPE html>
<html>
<head>
	<title>Geek Bookmarks<% if selected_folder %>: <%=selected_folder.name%><% end %></title>
	
	<link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css" />
	<style type="text/css">
		#root {
			width: 200px;
		}

		li.folder {
			/*display: none;*/
		}
		li.folder  > span{
			/*display: none;*/
			/*cursor: pointer;*/
		}

		li.folder > span {
			font-weight: bold;
		}

		ul  {
			/*padding: 0px;*/
			margin: 0px;
		}

		span {
			border-color: #ddd;
					    
		    border-width: 1px 1px 0 1px;
		    border-style: solid;
		    border-radius: 5px;
		    display: inline-block;
		    width: 100%;
		    padding: 5px;
		}
		li.folder > span > a {
			color: black;
		}
		li.folder > span {
			background-color: #eee;
			cursor: pointer;
		}
		html, body {
		    height: 100%;
		}

		li {
			padding-left: 15px;
		}
		/*html {
		    display: table;
		    margin: auto;
		}

		body {

		    display: table-cell;
		    /*vertical-align: middle;*/
		}    */

		h3 {
			text-align: center;
		}

		li {
			display: none;
		}

		#root > ul > li {
			display: block;
		}

	</style>
	<script type="text/javascript" src="/js/jquery.min.js"></script>
	<script type="text/javascript" src="/js/underscore.js"></script>
	<script type="text/javascript" src="/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="/js/jquery-bootstrap-tree.js"></script>
	<script type="text/javascript">
		var width = 200;
		function setPadding($ul, level){
			$ul.children('li').children('span').css('width', (width-15 * (level)) + 'px');
			var childUls = $ul.children('li').children('ul');
			for(var i = 0; i  < childUls.length; i++){
				var childUl = $(childUls[i]);
				setPadding(childUl, level + 1);
			}
			// (function(level){
			// 	$ul.find('li').children('ul').each(function(i, ul){
			// 		setPadding($(ul), level + 1);
			// 	});	
			// })(level);
			
		}
		var apiRoot = "http://lilacpenguin.me:4567/api/";

		function loadFolderContents(folderId){
			$.getJSON(apiRoot+'folder/content/'+folderId, function(data){
				alert(data.bookmarks.length)
			});
		}

		var data = [];
		$(function(){
			$('#root').children('ul').each(function(i, ul){
				setPadding($(ul), 1);
			})

			$('li.folder').click(function(){
				$(this).children('ul').children().toggle(300);
				var id = $(this).attr('data-id');
				loadFolderContents(id);
				return false;
			});

			//$("#root").find(".folder > *").show();
			// $(".folder-label").click(function(){
			// 	$(this).siblings().toggle(400);
			// });

			// $(".remove").click(function(){
			// 	return confirm("Are you shure?");
			// });
			// $(".folder-label").hover(function(){
			// 	$(this).siblings().filter(".remove").toggle();
			// })

			
		});


	</script>
</head>
<body>
	<div class="row">
		<div class="span3">
			<% if selected_folder %>
				<h3><%=selected_folder.name%></h3>
			<% else %>
				<h3>Folders</h3>
			<% end %>
			<div id="root" class="list-tree folder">
				<!-- <div class="list-tree"></div> -->
				<%= erb :folders, :locals => {:attachments => root_folders} %>
			</div>
		</div>
		<div class="span3">
			<h3>Bookmarks<h3>

		</div>
		<div class="span3">
			<h3>Notes<h3>
			
		</div>
	</div>
</body>
</html>